<?php
if (filesize("output.txt") == 0)
{
    echo "<script> setTimeout(function(){ window.location.href='report2.php'; }, 60000); </script>"; 
}
$myFile = "output.txt";
$lines = file($myFile);//file in to an array
$myFile2="output1.txt";
$lines1 = file($myFile2);
?>
<!DOCTYPE html>
<html>
<head>
        <title>Analysis Report</title>
     <link href="bootstrap.min.css" rel="stylesheet" />

<meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="bootstrap.min.js"></script>
    <script src="jquery-1.10.2.min.js"></script>

    
<style>
body {font-family: Arial;
     
    }

/* Style the tab */
.tab {
  overflow: hidden;
  border: 1px solid #ccc;
  background-color: ghostwhite;
}

/* Style the buttons inside the tab */
.tab button {
  background-color: inherit;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px; 
  transition: 0.3s;
  font-size: 17px;
}

/* Change background color of buttons on hover */
.tab button:hover {
  background-color: #ddd;
}

/* Create an active/current tablink class */
.tab button.active {
  background-color: #ccc;

}

/* Style the tab content */
.tabcontent {
  display: none;
  padding: 6px 12px;
  border: 1px solid #ccc;
  border-top: none;
}
</style>

</head>
<body>
     <nav class=" navbar " style="background:white; ">
          <a class="navbar-brand" href="index.html"><img src="/logo.png" style="width:63px;"></a>
           <ul>
              <p style="font-size:40px; padding-top:17px; padding-right:45px; " align="center" >malVoid</p>
            </ul>
          
         
  
</nav> 
    <h5 align="center">(Please click on any of the fields for details)</h5>
    <div class="tab" >
         <h2 align="center">Analysis Report </h2>

    </div>
        <?php
ini_set('display_errors', 0);
error_reporting(E_ERROR | E_WARNING | E_PARSE);

require("reader.php"); // php excel reader
$file="perm.xls";
$connection=new Spreadsheet_Excel_Reader(); // our main object
$connection->read($file);
$startcol=1;
$endcol=114;
$row=2;
$col=1;
$row2=3;
    
?>
    <?php

ini_set('display_errors', 0);
error_reporting(E_ERROR | E_WARNING | E_PARSE);

 // php excel reader
$file2="api_calls.xls";
$connection2=new Spreadsheet_Excel_Reader(); // our main object
$connection2->read($file2);
$startcol=1;
$endcol=114;
$row=2;
$col=1;
$row2=3;
    
?>
<div class="tab">   <?php 
            if($connection->sheets[0]["cells"][8][1]=="Safe!"){
            echo '<h1 align="center"  style="color:Green;">The Application is '.($connection->sheets[0]["cells"][8][1]);
            }
            else{
            echo '<h1 align="center"   style="color:Red;">The Application is '.($connection->sheets[0]["cells"][8][1]); 
            }
            ?></div>
<div class="tab">
     
  <button class="tablinks" onclick="openAttr(event, 'General')">General Information</button>
  <button class="tablinks" onclick="openAttr(event, 'Permissions')">Permissions</button>
  <button class="tablinks" onclick="openAttr(event, 'API')">API Calls</button>
  <button class="tablinks" onclick="openAttr(event, 'Certificate')">Certificate</button>
    
</div>

   
<div id="General" class="tabcontent">

 <table class="table table-bordered">       
     <tr>
         <td>Application Name</td>
             <td><?php echo $lines[0];  ?></td>
         </tr>
       
        <tr>
        <td>Package Name</td>
        <td><?php echo $lines[1];  ?></td>
        </tr>
        <tr>
        <td>File Size</td>
        <td><?php echo(filesize("Upload/sample.apk")); echo("  Bytes"); ?></td>
            </tr>
         <tr>
         <td>File Version</td>
             <td><?php echo $lines[2] ?></td>
         </tr>
      
        </table> 
   
    </div>

<div id="Permissions" class="tabcontent">
 <table class="table table-bordered">      <?php


for($i=$startcol;$i<$endcol;$i++){ 
    if($connection->sheets[0]["cells"][$row][$i]!=""){
         echo "<tr><td>".$connection->sheets[0]["cells"][$row][$i]."</td>";
        echo "<td>".$connection->sheets[0]["cells"][$row2][$i]."</td></tr>";
    }
    else{
        continue;
    }
 
 



}?></table>
</div>

<div id="API" class="tabcontent">
 <table class="table table-bordered">      <?php


for($i=$startcol;$i<$endcol;$i++){ 
    if($connection2->sheets[0]["cells"][$row][$i]!=""){
         echo "<tr><td>".$connection2->sheets[0]["cells"][$row][$i]."</td></tr>";
    }
    else{
        continue;
    }
 
 



}?></table>
</div>
    <div id="Certificate" class="tabcontent">

   
    
 <table class="table table-bordered">         <tr><td><?php echo $lines1[1] ?></td></tr>
         <tr><td><?php echo $lines1[2] ?></td></tr>
         <tr><td><?php echo $lines1[3] ?></td></tr>
         <tr><td><?php echo $lines1[4] ?></td></tr>
         <tr><td><?php echo $lines1[5] ?></td></tr>
         <tr><td><?php echo $lines1[6] ?></td></tr>
         <tr><td><?php echo $lines1[7] ?></td></tr>
         <tr><td><?php echo $lines1[8] ?></td></tr>
         <tr><td><?php echo $lines1[9] ?></td></tr>
         <tr><td><?php echo $lines1[10] ?></td></tr>
         <tr><td><?php echo $lines1[11] ?></td></tr>
         <tr><td><?php echo $lines1[12] ?></td></tr>
         <tr><td><?php echo $lines1[13] ?></td></tr>
         <tr><td><?php echo $lines1[14] ?></td></tr>
         <tr><td><?php echo $lines1[15] ?></td></tr>
      
         <tr><td><?php echo $lines1[17] ?></td></tr>
         
       
        </table>
         
    </div>

<script>
function openAttr(evt, cityName) {
  var i, tabcontent, tablinks;
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }
  document.getElementById(cityName).style.display = "block";
  evt.currentTarget.className += " active";
}
</script>

   
</body>
</html> 
